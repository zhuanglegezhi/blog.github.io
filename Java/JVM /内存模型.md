# 内存模型

主要目标

定义程序中各个变量的访问规则，即在虚拟机中将变量存储到内存和从内存中取出变量这样的底层细节(不包括局部变量和方法参数)。

主内存与工作内存

Java内存模型规定了所有的变量都存储在主内存中。每条线程有自己的工作内存，线程的工作内存中保存了被该线程使用到的变量**的主内存副本拷贝**，线程对变量的所有操作（读取、 赋值等）都必须在工作内存中进行，而不能直接读写主内存中的变量。不同的线程之间也无法直接访问对方工作内存中的变量，线程间变量值的传递均需要通过主内存来完成，线程、 主内存、 工作内存三者的交互关系如下图

![image-20190223141110769](https://github.com/zz418172370oop/zhuanglegezhi.github.io/blob/master/resource/%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B.png)

volatile

内存屏障

happens-before