# 索引

优点

- 索引大大减少了服务器需要扫描的数据量
- 索引可以帮助服务器避免排序和临时表
- 索引可以将随机I/O变为顺序I/O

缺点

- 索引本身也是表，因此会占用存储空间，一般来说，索引表占用的空间的数据表的1.5倍；
- 索引表的维护和创建需要时间成本，这个成本随着数据量增大而增大；
- 构建索引会降低数据表的修改操作（删除，添加，修改）的效率，因为在修改数据表的同时还需要修改索引表。



## 类型

### B-Tree索引

限制

1. 如果不是按照索引的最左列开始查找，则无法使用索引；
2. 不能跳过索引中的列；
3. 如果查询中有某个列的范围查询（例如`LIKE`操作），则其右边所有列都无法使用索引优化查找。

### 哈希索引

Memory引擎默认支持

限制

1. 只包含哈希值和行指针，而不存储字段值，所以不能使用索引中的值来避免读取行；
2. 数据不是按照索引值顺序存储的，所以也就无法用于排序；
3. 不支持部分索引列匹配查找，因哈希索引始终是使用索引列的**全部**内容来计算哈希值的；
4. 只支持等值比较查询，包括=、IN（）、<=>(注意<>和<=>是不同的操作)；
5. 存在许多哈希冲突时，访问索引速度会有影响，维护的代价也很大。

### 空间数据索引

### 全文索引

分类

主键索引

唯一索引

普通索引

全文索引

组合索引

最左前缀



**索引策略**

前缀索引

唯一索引的选择性是1，这是最好的索引选择性，性能也是最好的

前缀索引是一种能使索引更小、更快的有效办法，但另一方面也有其缺点：Mysql无法使用前缀索引坐ORDER BY和GROUP BY，也无法使用前缀索引做覆盖扫描。



聚簇索引

聚簇索引并不是一种单独的索引类型，而是一种数据存储方式。

聚簇：表示数据行和相邻的键值紧凑地存储在一起。因为无法同时把数据行存放在两个不同的地方，所以一个表只能有一个聚簇索引。

叶子页包含了行的全部数据，但是节点页只包含了索引列。

优点

数据访问更快。聚簇索引将索引和数据保存在同一个B-Tree中，因此从聚簇索引中获取数据通常比非聚簇索引中查询要快。

缺点

更新聚簇索引列的代价很高。

可能会导致全表扫描变慢。

二级索引（非聚簇索引）可能比想象的要更大，因为在二级索引的叶子结点包含了引用行的主键列。



